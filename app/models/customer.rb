class Customer < ApplicationRecord
  before_validation { e_mail.downcase! }
	has_secure_password

	enum gender: {"男" => 1, "女" => 2, "その他" => 0}

	scope :name_search, ->(customer_name) {
		if customer_name.present?
			self.where("admin = false and name = '#{customer_name}'")
			# self.where("admin = false and name = ?", "#{customer_name}")
		else
			self.where("admin = false")
		end
	}

	validates :password, length: { minimum: 6 }, on: :create
	validates :name, :gender, :team, presence: true
	validates :e_mail, presence: true, uniqueness: true
	validates :e_mail, format: { with: /[A-Za-z_0-9\-]+@[A-Za-z_0-9\.]+\.[A-Za-z]+\z/ } # メールアドレス形式許可
	# validates :person_image, format: { with: /[A-Za-z_0-9\.]/ } # イメージファイル名形式
end
